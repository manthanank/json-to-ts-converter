<div class="container">
  <h1>JSON to TypeScript Converter</h1>

  <!-- Visitor count with new control flow syntax -->
  <div class="visitor-counter">
    @if (isVisitorCountLoading()) {
      <span>Loading visitor count...</span>
    } @else if (visitorCountError()) {
      <span class="error">{{ visitorCountError() }}</span>
    } @else {
      <span><strong>{{ visitorCount() }}</strong> visitors have used this tool</span>
    }
  </div>

  <div class="converter-area">
    <div class="input-section">
      <div class="section-header">
        <h2>JSON Input</h2>
        <div class="actions">
          <button class="action-btn" (click)="clearInput()">Clear</button>
          <button class="action-btn" (click)="loadSampleJson()">Sample</button>
        </div>
      </div>
      <textarea 
        [ngModel]="jsonInput()" 
        (ngModelChange)="onJsonInputChange($event)" 
        rows="15"
        placeholder="Enter JSON here" 
        [class.error]="inputHasError()"
      ></textarea>
      
      @if (inputHasError()) {
        <div class="error-message">{{ inputErrorMessage() }}</div>
      }
    </div>

    <div class="buttons">
      <button 
        class="main-btn" 
        (click)="convertJsonToTs()" 
        [disabled]="!canConvert()"
      >
        Convert â†’
      </button>
      <div class="options">
        <div class="checkbox-option">
          <input 
            type="checkbox" 
            id="useInterfaces" 
            [checked]="useInterfaces()" 
            (change)="toggleUseInterfaces()"
          >
          <label for="useInterfaces">Use interfaces (vs types)</label>
        </div>
        <div class="checkbox-option">
          <input 
            type="checkbox" 
            id="useOptionalFields" 
            [checked]="useOptionalFields()"
            (change)="toggleUseOptionalFields()"
          >
          <label for="useOptionalFields">Mark fields as optional</label>
        </div>
      </div>
    </div>

    <div class="output-section">
      <div class="section-header">
        <h2>TypeScript Output</h2>
        <div class="actions">
          <button 
            class="action-btn" 
            (click)="copyToClipboard()" 
            [disabled]="!canCopyOrDownload()"
          >
            Copy
          </button>
          <button 
            class="action-btn" 
            (click)="downloadAsFile()" 
            [disabled]="!canCopyOrDownload()"
          >
            Download
          </button>
        </div>
      </div>
      <pre [class.empty]="!tsOutput()">
        {{ tsOutput() || 'TypeScript output will appear here' }}
      </pre>
    </div>
  </div>

  @if (copySuccess()) {
    <div class="toast success">Copied to clipboard!</div>
  }
</div>